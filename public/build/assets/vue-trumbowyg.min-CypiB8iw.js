import{g as $,a as B,j as E,r as R,c as O}from"./app-Bkw5VNSX.js";var P={exports:{}};const S="/build/assets/icons-RHKppekq.svg",A=Object.freeze(Object.defineProperty({__proto__:null,default:S},Symbol.toStringTag,{value:"Module"})),D=$(A);var k={};/**
 * Trumbowyg v2.28.0 - A lightweight WYSIWYG editor
 * Trumbowyg core file
 * ------------------------
 * @link https://alex-d.github.io/Trumbowyg/
 * @license MIT
 * @author Alexandre Demode (Alex-D)
 *         Twitter : @AlexandreDemode
 *         Website : alex-d.fr
 */var T;function M(){return T||(T=1,jQuery.trumbowyg={langs:{en:{viewHTML:"View HTML",undo:"Undo",redo:"Redo",formatting:"Formatting",p:"Paragraph",blockquote:"Quote",code:"Code",header:"Header",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",strong:"Strong",em:"Emphasis",del:"Deleted",superscript:"Superscript",subscript:"Subscript",unorderedList:"Unordered list",orderedList:"Ordered list",insertImage:"Insert Image",link:"Link",createLink:"Insert link",unlink:"Remove link",_self:"Same tab (default)",_blank:"New tab",justifyLeft:"Align Left",justifyCenter:"Align Center",justifyRight:"Align Right",justifyFull:"Align Justify",horizontalRule:"Insert horizontal rule",removeformat:"Remove format",fullscreen:"Fullscreen",close:"Close",submit:"Confirm",reset:"Cancel",required:"Required",description:"Description",title:"Title",text:"Text",target:"Target",width:"Width"}},plugins:{},svgPath:null,svgAbsoluteUseHref:!1,hideButtonTexts:null},Object.defineProperty(jQuery.trumbowyg,"defaultOptions",{value:{lang:"en",fixedBtnPane:!1,fixedFullWidth:!1,autogrow:!1,autogrowOnEnter:!1,imageWidthModalEdit:!1,hideButtonTexts:null,prefix:"trumbowyg-",tagClasses:{},semantic:!0,semanticKeepAttributes:!1,resetCss:!1,removeformatPasted:!1,tabToIndent:!1,tagsToRemove:[],tagsToKeep:["hr","img","embed","iframe","input"],btns:[["viewHTML"],["undo","redo"],["formatting"],["strong","em","del"],["superscript","subscript"],["link"],["insertImage"],["justifyLeft","justifyCenter","justifyRight","justifyFull"],["unorderedList","orderedList"],["horizontalRule"],["removeformat"],["fullscreen"]],btnsDef:{},changeActiveDropdownIcon:!1,inlineElementsSelector:"a,abbr,acronym,b,caption,cite,code,col,dfn,dir,dt,dd,em,font,hr,i,kbd,li,q,span,strikeout,strong,sub,sup,u",pasteHandlers:[],plugins:{},urlProtocol:!1,minimalLinks:!1,linkTargets:["_self","_blank"],svgPath:null},writable:!1,enumerable:!0,configurable:!1}),function(y,p,w,o){var x="tbwconfirm",C="tbwcancel";o.fn.trumbowyg=function(e,t){var r="trumbowyg";if(e===Object(e)||!e)return this.each(function(){o(this).data(r)||o(this).data(r,new m(this,e))});if(this.length===1)try{var n=o(this).data(r);switch(e){case"execCmd":return n.execCmd(t.cmd,t.param,t.forceCss,t.skipTrumbowyg);case"openModal":return n.openModal(t.title,t.content);case"closeModal":return n.closeModal();case"openModalInsert":return n.openModalInsert(t.title,t.fields,t.callback);case"saveRange":return n.saveRange();case"getRange":return n.range;case"getRangeText":return n.getRangeText();case"restoreRange":return n.restoreRange();case"enable":return n.setDisabled(!1);case"disable":return n.setDisabled(!0);case"toggle":return n.toggle();case"destroy":return n.destroy();case"empty":return n.empty();case"html":return n.html(t)}}catch{}return!1};var m=function(e,t){var r=this,n="trumbowyg-icons",a=o.trumbowyg;r.doc=e.ownerDocument||w,r.$ta=o(e),r.$c=o(e),t=t||{},t.lang!=null||a.langs[t.lang]!=null?r.lang=o.extend(!0,{},a.langs.en,a.langs[t.lang]):r.lang=a.langs.en,r.hideButtonTexts=a.hideButtonTexts!=null?a.hideButtonTexts:t.hideButtonTexts;var s=a.svgPath!=null?a.svgPath:t.svgPath;if(r.hasSvg=s!==!1,s!==!1&&(a.svgAbsoluteUseHref||o("#"+n,r.doc).length===0)){if(s==null){var i=o("script[src]");i.each(function(h,f){var g=f.src,b=g.match("trumbowyg(.min)?.js");b!=null&&(s=g.substring(0,g.indexOf(b[0]))+"ui/icons.svg")})}if(s==null)console.warn("You must define svgPath: https://goo.gl/CfTY9U");else if(!a.svgAbsoluteUseHref){var l=r.doc.createElement("div");l.id=n,r.doc.body.insertBefore(l,r.doc.body.childNodes[0]),fetch(s,{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(h=>{h.text().then(f=>{l.innerHTML=f})})}}var u=r.doc.querySelector("base")?p.location.href.replace(p.location.hash,""):"";r.svgPath=a.svgAbsoluteUseHref?s:u;var c=r.lang.header,d=function(){return(p.chrome||p.Intl&&Intl.v8BreakIterator)&&"CSS"in p};r.btnsDef={viewHTML:{fn:"toggle",class:"trumbowyg-not-disable"},undo:{isSupported:d,key:"Z"},redo:{isSupported:d,key:"Y"},p:{fn:"formatBlock"},blockquote:{fn:"formatBlock"},h1:{fn:"formatBlock",title:c+" 1"},h2:{fn:"formatBlock",title:c+" 2"},h3:{fn:"formatBlock",title:c+" 3"},h4:{fn:"formatBlock",title:c+" 4"},h5:{fn:"formatBlock",title:c+" 5"},h6:{fn:"formatBlock",title:c+" 6"},subscript:{tag:"sub"},superscript:{tag:"sup"},bold:{key:"B",tag:"b"},italic:{key:"I",tag:"i"},underline:{tag:"u"},strikethrough:{tag:"strike"},strong:{fn:"bold",key:"B"},em:{fn:"italic",key:"I"},del:{fn:"strikethrough"},createLink:{key:"K",tag:"a"},unlink:{},insertImage:{},justifyLeft:{tag:"left",forceCss:!0},justifyCenter:{tag:"center",forceCss:!0},justifyRight:{tag:"right",forceCss:!0},justifyFull:{tag:"justify",forceCss:!0},unorderedList:{fn:"insertUnorderedList",tag:"ul"},orderedList:{fn:"insertOrderedList",tag:"ol"},horizontalRule:{fn:"insertHorizontalRule"},removeformat:{},fullscreen:{class:"trumbowyg-not-disable"},close:{fn:"destroy",class:"trumbowyg-not-disable"},formatting:{dropdown:["p","blockquote","h1","h2","h3","h4"],ico:"p"},link:{dropdown:["createLink","unlink"]}},r.o=o.extend(!0,{},a.defaultOptions,t),r.o.hasOwnProperty("imgDblClickHandler")||(r.o.imgDblClickHandler=r.getDefaultImgDblClickHandler()),r.urlPrefix=r.setupUrlPrefix(),r.disabled=r.o.disabled||e.nodeName==="TEXTAREA"&&e.disabled,t.btns?r.o.btns=t.btns:r.o.semantic||(r.o.btns[3]=["bold","italic","underline","strikethrough"]),o.each(r.o.btnsDef,function(h,f){r.addBtnDef(h,f)}),r.eventNamespace="trumbowyg-event",r.keys=[],r.tagToButton={},r.tagHandlers=[],r.pasteHandlers=[].concat(r.o.pasteHandlers),r.isIE=y.userAgent.indexOf("MSIE")!==-1||y.appVersion.indexOf("Trident/")!==-1,r.isMac=y.platform.toUpperCase().indexOf("MAC")!==-1,r.init()};m.prototype={DEFAULT_SEMANTIC_MAP:{b:"strong",i:"em",s:"del",strike:"del",div:"p"},init:function(){var e=this;e.height=e.$ta.outerHeight()-39,e.initPlugins();try{e.doc.execCommand("enableObjectResizing",!1,!1),e.doc.execCommand("defaultParagraphSeparator",!1,"p")}catch{}e.buildEditor(),e.buildBtnPane(),e.fixedBtnPaneEvents(),e.buildOverlay(),setTimeout(function(){e.disabled&&e.setDisabled(!0),e.$c.trigger("tbwinit")})},addBtnDef:function(e,t){this.btnsDef[e]=o.extend(t,this.btnsDef[e]||{})},setupUrlPrefix:function(){var e=this.o.urlProtocol;if(e)return typeof e!="string"?"https://":e.replace("://","")+"://"},buildEditor:function(){var e=this,t=e.o.prefix,r="";e.$box=o("<div/>",{class:t+"box "+t+"editor-visible "+t+e.o.lang+" trumbowyg"}),e.$edBox=o("<div/>",{class:t+"editor-box"}),e.isTextarea=e.$ta.is("textarea"),e.isTextarea?(r=e.$ta.val(),e.$ed=o("<div/>").appendTo(e.$edBox),e.$box.insertAfter(e.$ta).append(e.$edBox,e.$ta)):(e.$ed=e.$ta,r=e.$ed.html(),e.$ta=o("<textarea/>",{name:e.$ta.attr("id"),height:e.height}).val(r),e.$box.insertAfter(e.$ed).append(e.$ta,e.$edBox),e.$edBox.append(e.$ed),e.syncCode()),e.$ta.addClass(t+"textarea").attr("tabindex",-1),e.$ed.addClass(t+"editor").attr({contenteditable:!0,dir:e.lang._dir||"ltr"}).html(r),e.o.tabindex&&e.$ed.attr("tabindex",e.o.tabindex),e.$c.is("[placeholder]")&&e.$ed.attr("placeholder",e.$c.attr("placeholder")),e.$c.is("[spellcheck]")&&e.$ed.attr("spellcheck",e.$c.attr("spellcheck")),e.o.resetCss&&e.$ed.addClass(t+"reset-css"),e.semanticCode(),e.o.autogrowOnEnter&&e.$ed.addClass(t+"autogrow-on-enter");var n=!1,a=!1,s;e.$ed.on("dblclick","img",e.o.imgDblClickHandler).on("keydown",function(i){var l=i.which;if((l===8||l===13||l===46)&&e.toggleSpan(!0),(i.ctrlKey||i.metaKey)&&!i.altKey){n=!0;var u=e.keys[String.fromCharCode(i.which).toUpperCase()];try{return e.execCmd(u.fn,u.param),!1}catch{}}else if(e.o.tabToIndent&&i.key==="Tab")try{return i.shiftKey?e.execCmd("outdent",!0,null):e.execCmd("indent",!0,null),!1}catch{}}).on("compositionstart compositionupdate",function(){a=!0}).on("keyup compositionend",function(i){if(i.type==="compositionend")a=!1;else if(a)return;var l=i.which;if(!(l>=37&&l<=40)){if((l===8||l===13||l===46)&&e.toggleSpan(),(i.ctrlKey||i.metaKey)&&(l===89||l===90))e.semanticCode(!1,!0),e.$c.trigger("tbwchange");else if(!n&&l!==16&&l!==17){var u=e.isIE?i.type==="compositionend":!0;e.semanticCode(!1,u&&l===13),e.$c.trigger("tbwchange")}else typeof i.which>"u"&&e.semanticCode(!1,!1,!0);setTimeout(function(){n=!1},50)}}).on("input",function(i){var l=i.originalEvent;typeof l=="object"&&(l.inputType==="insertReplacementText"||l.inputType==="insertText"&&l.data===null)&&e.$c.trigger("tbwchange")}).on("mouseup keydown keyup",function(i){(!i.ctrlKey&&!i.metaKey||i.altKey)&&setTimeout(function(){n=!1},50),clearTimeout(s),s=setTimeout(function(){e.updateButtonPaneStatus()},50)}).on("focus blur",function(i){if(i.type==="blur"&&e.clearButtonPaneStatus(),e.$c.trigger("tbw"+i.type),e.o.autogrowOnEnter){if(e.autogrowOnEnterDontClose)return;i.type==="focus"?(e.autogrowOnEnterWasFocused=!0,e.autogrowEditorOnEnter()):e.o.autogrow||(e.$edBox.css({height:e.$edBox.css("min-height")}),e.$c.trigger("tbwresize"))}}).on("keyup focus",function(){!e.$ta.val().match(/<.*>/)&&!e.$ed.html().match(/<.*>/)&&setTimeout(function(){var i=e.isIE?"<p>":"p";e.doc.execCommand("formatBlock",!1,i),e.syncCode()},0)}).on("cut drop",function(){setTimeout(function(){e.semanticCode(!1,!0),e.$c.trigger("tbwchange")},0)}).on("paste",function(i){if(e.o.removeformatPasted){i.preventDefault(),p.getSelection&&p.getSelection().deleteFromDocument&&p.getSelection().deleteFromDocument();try{var l=p.clipboardData.getData("Text");try{e.doc.selection.createRange().pasteHTML(l)}catch{e.doc.getSelection().getRangeAt(0).insertNode(e.doc.createTextNode(l))}e.$c.trigger("tbwchange",i)}catch{e.execCmd("insertText",(i.originalEvent||i).clipboardData.getData("text/plain"))}}o.each(e.pasteHandlers,function(u,c){c(i)}),setTimeout(function(){e.semanticCode(!1,!0),e.$c.trigger("tbwpaste",i),e.$c.trigger("tbwchange")},0)}),e.$ta.on("keyup",function(){e.$c.trigger("tbwchange")}).on("paste",function(){setTimeout(function(){e.$c.trigger("tbwchange")},0)}),o(e.doc.body).on("keydown."+e.eventNamespace,function(i){if(i.which===27&&o("."+t+"modal-box").length>=1)return e.closeModal(),!1})},autogrowEditorOnEnter:function(){var e=this;e.$ed.removeClass("autogrow-on-enter");var t=e.$ed[0].clientHeight;e.$edBox.height("auto");var r=e.$ed[0].scrollHeight;e.$ed.addClass("autogrow-on-enter"),t!==r&&(e.$edBox.height(t),setTimeout(function(){e.$edBox.css({height:r}),e.$c.trigger("tbwresize")},0))},buildBtnPane:function(){var e=this,t=e.o.prefix,r=e.$btnPane=o("<div/>",{class:t+"button-pane"});o.each(e.o.btns,function(n,a){Array.isArray(a)||(a=[a]);var s=o("<div/>",{class:t+"button-group "+(a.indexOf("fullscreen")>=0?t+"right":"")});o.each(a,function(i,l){try{e.isSupportedBtn(l)&&s.append(e.buildBtn(l))}catch{}}),s.html().trim().length>0&&r.append(s)}),e.$box.prepend(r)},buildBtn:function(e){var t=this,r=t.o.prefix,n=t.btnsDef[e],a=n.dropdown,s=n.hasIcon!=null?n.hasIcon:!0,i=t.lang[e]||e,l=o("<button/>",{type:"button",class:r+e+"-button "+(n.class||"")+(s?"":" "+r+"textual-button"),html:t.hasSvg&&s?'<svg><use xlink:href="'+t.svgPath+"#"+r+(n.ico||e).replace(/([A-Z]+)/g,"-$1").toLowerCase()+'"/></svg>':t.hideButtonTexts?"":n.text||n.title||t.lang[e]||e,title:(n.title||n.text||i)+(n.key?" ("+(t.isMac?"Cmd":"Ctrl")+" + "+n.key+")":""),tabindex:-1,mousedown:function(){return(!a||o("."+e+"-"+r+"dropdown",t.$box).is(":hidden"))&&o("body",t.doc).trigger("mousedown"),(t.$btnPane.hasClass(r+"disable")||t.$box.hasClass(r+"disabled"))&&!o(this).hasClass(r+"active")&&!o(this).hasClass(r+"not-disable")||t.execCmd((a?"dropdown":!1)||n.fn||e,n.param||e,n.forceCss),!1}});if(a){l.addClass(r+"open-dropdown");var u=r+"dropdown",c={class:u+"-"+e+" "+u+" "+r+"fixed-top "+(n.dropdownClass||"")};c["data-"+u]=e;var d=o("<div/>",c);o.each(a,function(h,f){t.btnsDef[f]&&t.isSupportedBtn(f)&&d.append(t.buildSubBtn(f))}),t.$box.append(d.hide())}else n.key&&(t.keys[n.key]={fn:n.fn||e,param:n.param||e});return a||(t.tagToButton[(n.tag||e).toLowerCase()]=e),l},buildSubBtn:function(e){var t=this,r=t.o.prefix,n=t.btnsDef[e],a=n.hasIcon!=null?n.hasIcon:!0;return n.key&&(t.keys[n.key]={fn:n.fn||e,param:n.param||e}),t.tagToButton[(n.tag||e).toLowerCase()]=e,o("<button/>",{type:"button",class:r+e+"-dropdown-button "+(n.class||"")+(n.ico?" "+r+n.ico+"-button":""),html:t.hasSvg&&a?'<svg><use xlink:href="'+t.svgPath+"#"+r+(n.ico||e).replace(/([A-Z]+)/g,"-$1").toLowerCase()+'"/></svg>'+(n.text||n.title||t.lang[e]||e):n.text||n.title||t.lang[e]||e,title:n.key?"("+(t.isMac?"Cmd":"Ctrl")+" + "+n.key+")":null,style:n.style||null,mousedown:function(){return o("body",t.doc).trigger("mousedown"),t.execCmd(n.fn||e,n.param||e,n.forceCss),!1}})},isSupportedBtn:function(e){try{return this.btnsDef[e].isSupported()}catch{}return!0},buildOverlay:function(){var e=this;return e.$overlay=o("<div/>",{class:e.o.prefix+"overlay"}).appendTo(e.$box),e.$overlay},showOverlay:function(){var e=this;o(p).trigger("scroll"),e.$overlay.fadeIn(200),e.$box.addClass(e.o.prefix+"box-blur")},hideOverlay:function(){var e=this;e.$overlay.fadeOut(50),e.$box.removeClass(e.o.prefix+"box-blur")},fixedBtnPaneEvents:function(){var e=this,t=e.o.fixedFullWidth,r=e.$box;e.o.fixedBtnPane&&(e.isFixed=!1,o(p).on("scroll."+e.eventNamespace+" resize."+e.eventNamespace,function(){if(r){e.syncCode();var n=o(p).scrollTop(),a=r.offset().top+1,s=e.$btnPane,i=s.outerHeight()-2;n-a>0&&n-a-e.height<0?(e.isFixed||(e.isFixed=!0,s.css({position:"fixed",top:0,left:t?0:"auto",zIndex:7}),e.$box.css({paddingTop:s.height()})),s.css({width:t?"100%":r.width()-1}),o("."+e.o.prefix+"fixed-top",r).css({position:t?"fixed":"absolute",top:t?i:i+(n-a),zIndex:15})):e.isFixed&&(e.isFixed=!1,s.removeAttr("style"),e.$box.css({paddingTop:0}),o("."+e.o.prefix+"fixed-top",r).css({position:"absolute",top:i}))}}))},setDisabled:function(e){var t=this,r=t.o.prefix;t.disabled=e,e?t.$ta.attr("disabled",!0):t.$ta.removeAttr("disabled"),t.$box.toggleClass(r+"disabled",e),t.$ed.attr("contenteditable",!e)},destroy:function(){var e=this,t=e.o.prefix;e.isTextarea?e.$box.after(e.$ta.css({height:""}).val(e.html()).removeClass(t+"textarea").show()):e.$box.after(e.$edBox.css({height:""}).removeClass(t+"editor").removeAttr("contenteditable").removeAttr("dir").html(e.html()).show()),e.$ed.off("dblclick","img"),e.destroyPlugins(),e.$box.remove(),e.$c.removeData("trumbowyg"),o("body").removeClass(t+"body-fullscreen"),e.$c.trigger("tbwclose"),o(p).off("scroll."+e.eventNamespace+" resize."+e.eventNamespace),o(e.doc.body).off("keydown."+e.eventNamespace)},empty:function(){this.doc.execCommand("insertHTML",!1,""),this.$ta.val(""),this.syncCode(!0)},toggle:function(){var e=this,t=e.o.prefix;e.o.autogrowOnEnter&&(e.autogrowOnEnterDontClose=!e.$box.hasClass(t+"editor-hidden")),e.semanticCode(!1,!0),e.$c.trigger("tbwchange"),setTimeout(function(){e.doc.activeElement.blur(),e.$box.toggleClass(t+"editor-hidden "+t+"editor-visible"),e.$btnPane.toggleClass(t+"disable"),o("."+t+"viewHTML-button",e.$btnPane).toggleClass(t+"active"),e.$box.hasClass(t+"editor-visible")?e.$ta.attr("tabindex",-1):e.$ta.removeAttr("tabindex"),e.o.autogrowOnEnter&&!e.autogrowOnEnterDontClose&&e.autogrowEditorOnEnter()},0)},toggleSpan:function(e){var t=this;t.$ed.find("span").each(function(){e===!0?o(this).attr("data-tbw-flag",!0):o(this).attr("data-tbw-flag")?o(this).removeAttr("data-tbw-flag"):o(this).contents().unwrap()})},dropdown:function(e){var t=this,r=o("body",t.doc),n=t.o.prefix,a=o("[data-"+n+"dropdown="+e+"]",t.$box),s=o("."+n+e+"-button",t.$btnPane),i=a.is(":hidden");if(r.trigger("mousedown"),i){var l=s.offset().left;s.addClass(n+"active"),a.css({position:"absolute",top:s.offset().top-t.$btnPane.offset().top+s.outerHeight(),left:t.o.fixedFullWidth&&t.isFixed?l:l-t.$btnPane.offset().left}).show(),o(p).trigger("scroll"),r.on("mousedown."+t.eventNamespace,function(u){a.is(u.target)||(o("."+n+"dropdown",t.$box).hide(),o("."+n+"active",t.$btnPane).removeClass(n+"active"),r.off("mousedown."+t.eventNamespace))})}},html:function(e){var t=this;return e!=null?(t.$ta.val(e),t.syncCode(!0),t.$c.trigger("tbwchange"),t):t.$ta.val()},syncTextarea:function(){var e=this;e.$ta.val(e.$ed.text().trim().length>0||e.$ed.find(e.o.tagsToKeep.join(",")).length>0?e.$ed.html():"")},syncCode:function(e){var t=this;if(!e&&t.$ed.is(":visible"))t.syncTextarea();else{var r=o("<div>").html(t.$ta.val()),n=o("<div>").append(r);o(t.o.tagsToRemove.join(","),n).remove(),t.$ed.html(n.contents().html())}if(t.o.autogrow&&(t.height=t.$edBox.height(),t.height!==t.$ta.css("height")&&(t.$ta.css({height:t.height}),t.$c.trigger("tbwresize"))),t.o.autogrowOnEnter){t.$edBox.height("auto");var a=t.autogrowOnEnterWasFocused?t.$edBox[0].scrollHeight:t.$edBox.css("min-height");a!==t.$ta.css("height")&&(t.$edBox.css({height:a}),t.$c.trigger("tbwresize"))}},semanticCode:function(e,t,r){var n=this;n.saveRange(),n.syncCode(e);var a=!0;if(n.range&&n.range.collapsed&&(a=!1),n.o.semantic){if(n.semanticTag("b",n.o.semanticKeepAttributes),n.semanticTag("i",n.o.semanticKeepAttributes),n.semanticTag("s",n.o.semanticKeepAttributes),n.semanticTag("strike",n.o.semanticKeepAttributes),t){var s=n.o.inlineElementsSelector,i=":not("+s+")";n.$ed.contents().filter(function(){return this.nodeType===3&&this.nodeValue.trim().length>0}).wrap("<span data-tbw/>");var l=function(u){if(u.length!==0){var c=u.nextUntil(i).addBack().wrapAll("<p/>").parent(),d=c.nextAll(s).first();c.next("br").remove(),l(d)}};l(n.$ed.children(s).first()),n.semanticTag("div",!0),o("[data-tbw]",n.$ed).contents().unwrap(),n.$ed.find("p:empty").remove()}!r&&a&&n.restoreRange(),n.syncTextarea()}},semanticTag:function(e,t,r){var n,a=this,s=e;if(this.o.semantic!=null&&typeof this.o.semantic=="object"&&this.o.semantic.hasOwnProperty(e))n=this.o.semantic[e];else if(this.o.semantic===!0&&this.DEFAULT_SEMANTIC_MAP.hasOwnProperty(e))n=this.DEFAULT_SEMANTIC_MAP[e];else return;r&&(e=n,n=s),o(e,this.$ed).each(function(){var i=!1,l=o(this);if(l.contents().length===0)return!1;a.range&&a.range.startContainer.parentNode===this&&(i=!0);var u=o("<"+n+"/>");u.insertBefore(l),t&&o.each(l.prop("attributes"),function(){u.attr(this.name,this.value)}),u.html(l.html()),l.remove(),i===!0&&(a.range.selectNodeContents(u.get(0)),a.range.collapse(!1))})},createLink:function(){for(var e=this,t=e.doc.getSelection(),r=t.getRangeAt(0),n=t.focusNode,a=new XMLSerializer().serializeToString(r.cloneContents())||r+"",s,i,l,u=e.o.linkTargets[0];["A","DIV"].indexOf(n.nodeName)<0;)n=n.parentNode;if(n&&n.nodeName==="A"){var c=o(n);a=c.text(),s=c.attr("href"),e.o.minimalLinks||(i=c.attr("title"),l=c.attr("target")||u);var d=e.doc.createRange();d.selectNode(n),t.removeAllRanges(),t.addRange(d)}e.saveRange();var h={url:{label:e.lang.linkUrl||"URL",required:!0,value:s},text:{label:e.lang.text,value:a}};if(!e.o.minimalLinks){var f=e.o.linkTargets.reduce(function(g,b){return g[b]=e.lang[b],g},{});o.extend(h,{title:{label:e.lang.title,value:i},target:{label:e.lang.target,value:l,options:f}})}e.openModalInsert(e.lang.createLink,h,function(g){var b=e.prependUrlPrefix(g.url);if(!b.length)return!1;var v=o(['<a href="',b,'">',g.text||g.url,"</a>"].join(""));return g.title&&v.attr("title",g.title),(g.target||u)&&v.attr("target",g.target||u),e.range.deleteContents(),e.range.insertNode(v[0]),e.syncCode(),e.$c.trigger("tbwchange"),!0})},prependUrlPrefix:function(e){var t=this;if(!t.urlPrefix)return e;var r=/^([a-z][-+.a-z0-9]*:|\/|#)/i;if(r.test(e))return e;var n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return n.test(e)?"mailto:"+e:t.urlPrefix+e},unlink:function(){var e=this,t=e.doc.getSelection(),r=t.focusNode;if(t.isCollapsed){for(;["A","DIV"].indexOf(r.nodeName)<0;)r=r.parentNode;if(r&&r.nodeName==="A"){var n=e.doc.createRange();n.selectNode(r),t.removeAllRanges(),t.addRange(n)}}e.execCmd("unlink",void 0,void 0,!0)},insertImage:function(){var e=this;e.saveRange();var t={url:{label:"URL",required:!0},alt:{label:e.lang.description,value:e.getRangeText()}};e.o.imageWidthModalEdit&&(t.width={}),e.openModalInsert(e.lang.insertImage,t,function(r){e.execCmd("insertImage",r.url,!1,!0);var n=o('img[src="'+r.url+'"]:not([alt])',e.$box);return n.attr("alt",r.alt),e.o.imageWidthModalEdit&&n.attr({width:r.width}),e.syncCode(),e.$c.trigger("tbwchange"),!0})},fullscreen:function(){var e=this,t=e.o.prefix,r=t+"fullscreen",n=r+"-placeholder",a,s=e.$box.outerHeight();e.$box.toggleClass(r),a=e.$box.hasClass(r),a?e.$box.before(o("<div/>",{class:n}).css({height:s})):o("."+n).remove(),o("body").toggleClass(t+"body-fullscreen",a),o(p).trigger("scroll"),e.$c.trigger("tbw"+(a?"open":"close")+"fullscreen")},execCmd:function(e,t,r,n){var a=this;n=!!n||"",e!=="dropdown"&&a.$ed.focus(),e==="strikethrough"&&a.o.semantic&&a.semanticTag("strike",a.o.semanticKeepAttributes,!0);try{a.doc.execCommand("styleWithCSS",!1,r||!1)}catch{}try{a[e+n](t)}catch{try{e(t)}catch{e==="insertHorizontalRule"?t=void 0:e==="formatBlock"&&a.isIE&&(t="<"+t+">"),a.doc.execCommand(e,!1,t),a.syncCode(),a.semanticCode(!1,!0);try{var s=p.getSelection().focusNode;o(p.getSelection().focusNode.parentNode).hasClass("trumbowyg-editor")||(s=p.getSelection().focusNode.parentNode);var i=a.o.tagClasses[t];i&&o(s).addClass(i)}catch{}}e!=="dropdown"&&(a.updateButtonPaneStatus(),a.$c.trigger("tbwchange"))}},openModal:function(e,t,r){var n=this,a=n.o.prefix;if(r=r!==!1,o("."+a+"modal-box",n.$box).length>0)return!1;n.o.autogrowOnEnter&&(n.autogrowOnEnterDontClose=!0),n.saveRange(),n.showOverlay(),n.$btnPane.addClass(a+"disable");var s=o("<div/>",{class:a+"modal "+a+"fixed-top"}).css({top:n.$box.offset().top+n.$btnPane.height(),zIndex:99999}).appendTo(o(n.doc.body)),i=a+"dark";n.$c.parents("."+i).length!==0&&s.addClass(i),n.$overlay.one("click",function(){return s.trigger(C),!1});var l;r?l=o("<form/>",{action:"",html:t}).on("submit",function(){return s.trigger(x),!1}).on("reset",function(){return s.trigger(C),!1}).on("submit reset",function(){n.o.autogrowOnEnter&&(n.autogrowOnEnterDontClose=!1)}):l=t;var u=o("<div/>",{class:a+"modal-box",html:l}).css({top:"-"+n.$btnPane.outerHeight(),opacity:0,paddingBottom:r?null:"5%"}).appendTo(s).animate({top:0,opacity:1},100);return e&&o("<span/>",{text:e,class:a+"modal-title"}).prependTo(u),r&&(o(":input:first",u).focus(),n.buildModalBtn("submit",u),n.buildModalBtn("reset",u),s.height(u.outerHeight()+10)),o(p).trigger("scroll"),n.$c.trigger("tbwmodalopen"),s},buildModalBtn:function(e,t){var r=this,n=r.o.prefix;return o("<button/>",{class:n+"modal-button "+n+"modal-"+e,type:e,text:r.lang[e]||e}).appendTo(o("form",t))},closeModal:function(){var e=this,t=e.o.prefix;e.$btnPane.removeClass(t+"disable"),e.$overlay.off();var r=o("."+t+"modal-box",o(e.doc.body));r.animate({top:"-"+r.height()},100,function(){r.parent().remove(),e.hideOverlay(),e.$c.trigger("tbwmodalclose")}),e.restoreRange()},openModalInsert:function(e,t,r){var n=this,a=n.o.prefix,s=n.lang,i="",l=a+"form-"+Date.now()+"-";return o.each(t,function(u,c){var d=c.label||u,h=c.name||u,f=c.attributes||{},g=l+u,b=Object.keys(f).map(function(v){return v+'="'+f[v]+'"'}).join(" ");if(typeof c.type=="function"){c.name||(c.name=h),i+=c.type(c,g,a,s);return}i+='<div class="'+a+'input-row">',i+='<div class="'+a+'input-infos"><label for="'+g+'"><span>'+(s[d]?s[d]:d)+"</span></label></div>",i+='<div class="'+a+'input-html">',o.isPlainObject(c.options)?(i+='<select name="target">',i+=Object.keys(c.options).map(v=>'<option value="'+v+'" '+(v===c.value?"selected":"")+">"+c.options[v]+"</option>").join(""),i+="</select>"):(i+='<input id="'+g+'" type="'+(c.type||"text")+'" name="'+h+'" '+b,i+=(c.type==="checkbox"&&c.value?' checked="checked"':"")+' value="'+(c.value||"").replace(/"/g,"&quot;")+'">'),i+="</div></div>"}),n.openModal(e,i).on(x,function(){var u=o("form",o(this)),c=!0,d={};o.each(t,function(h,f){var g=f.name||h,b=o(':input[name="'+g+'"]',u),v=b[0].type;switch(v.toLowerCase()){case"checkbox":d[g]=b.is(":checked");break;case"radio":d[g]=b.filter(":checked").val();break;default:d[g]=b.val().trim();break}f.required&&d[g]===""?(c=!1,n.addErrorOnModalField(b,n.lang.required)):f.pattern&&!f.pattern.test(d[g])&&(c=!1,n.addErrorOnModalField(b,f.patternError))}),c&&(n.restoreRange(),r(d,t)&&(n.syncCode(),n.$c.trigger("tbwchange"),n.closeModal(),o(this).off(x)))}).one(C,function(){o(this).off(x),n.closeModal()})},addErrorOnModalField:function(e,t){var r=this.o.prefix,n=r+"msg-error",a=e.closest("."+r+"input-row");e.one("change keyup",function(){a.removeClass(r+"input-error")}),a.find("."+n).remove(),a.addClass(r+"input-error").find("."+r+"input-infos label").append(o("<span/>",{class:n,text:t}))},getDefaultImgDblClickHandler:function(){var e=this;return function(){var t=o(this),r=t.attr("src"),n="(Base64)";r.indexOf("data:image")===0&&(r=n);var a={url:{label:"URL",value:r,required:!0},alt:{label:e.lang.description,value:t.attr("alt")}};return e.o.imageWidthModalEdit&&(a.width={value:t.attr("width")?t.attr("width"):""}),e.openModalInsert(e.lang.insertImage,a,function(s){return s.url!==n&&t.attr({src:s.url}),t.attr({alt:s.alt}),e.o.imageWidthModalEdit&&(parseInt(s.width)>0?t.attr({width:s.width}):t.removeAttr("width")),!0}),!1}},saveRange:function(){var e=this,t=e.doc.getSelection();if(e.range=null,!(!t||!t.rangeCount)){var r=e.range=t.getRangeAt(0),n=e.doc.createRange(),a;n.selectNodeContents(e.$ed[0]),n.setEnd(r.startContainer,r.startOffset),a=(n+"").length,e.metaRange={start:a,end:a+(r+"").length}}},restoreRange:function(){var e=this,t=e.metaRange,r=e.range,n=e.doc.getSelection(),a;if(r){if(t&&t.start!==t.end){var s=0,i=[e.$ed[0]],l,u=!1,c=!1;for(a=e.doc.createRange();!c&&(l=i.pop());)if(l.nodeType===3){var d=s+l.length;!u&&t.start>=s&&t.start<=d&&(a.setStart(l,t.start-s),u=!0),u&&t.end>=s&&t.end<=d&&(a.setEnd(l,t.end-s),c=!0),s=d}else for(var h=l.childNodes,f=h.length;f>0;)f-=1,i.push(h[f])}try{n.removeAllRanges()}catch{}n.addRange(a||r)}},getRangeText:function(){return this.range+""},clearButtonPaneStatus:function(){var e=this,t=e.o.prefix,r=t+"active-button "+t+"active",n=t+"original-icon";o("."+t+"active-button",e.$btnPane).removeClass(r),o("."+n,e.$btnPane).each(function(){o(this).find("svg use").attr("xlink:href",o(this).data(n))})},updateButtonPaneStatus:function(){var e=this,t=e.o.prefix,r=t+"active-button "+t+"active",n=t+"original-icon",a=e.getTagsRecursive(e.doc.getSelection().anchorNode);e.clearButtonPaneStatus(),o.each(a,function(s,i){var l=e.tagToButton[i.toLowerCase()],u=o("."+t+l+"-button",e.$btnPane);if(u.length>0)u.addClass(r);else try{u=o("."+t+"dropdown ."+t+l+"-dropdown-button",e.$box);var c=u.find("svg use"),d=u.parent().data(t+"dropdown"),h=o("."+t+d+"-button",e.$box),f=h.find("svg use");h.addClass(r),e.o.changeActiveDropdownIcon&&c.length>0&&(h.addClass(n).data(n,f.attr("xlink:href")),f.attr("xlink:href",c.attr("xlink:href")))}catch{}})},getTagsRecursive:function(e,t){var r=this;if(t=t||(e&&e.tagName?[e.tagName]:[]),e&&e.parentNode)e.nodeType!==Node.ELEMENT_NODE&&(e=e.parentNode);else return t;var n=e.tagName;return n==="DIV"?t:(n==="P"&&e.style.textAlign!==""&&t.push(e.style.textAlign),o.each(r.tagHandlers,function(a,s){t=t.concat(s(e,r))}),t.push(n),r.getTagsRecursive(e.parentNode,t).filter(function(a){return a!=null}))},initPlugins:function(){var e=this;e.loadedPlugins=[],o.each(o.trumbowyg.plugins,function(t,r){(!r.shouldInit||r.shouldInit(e))&&(r.init(e),r.tagHandler&&e.tagHandlers.push(r.tagHandler),e.loadedPlugins.push(r))})},destroyPlugins:function(){var e=this;o.each(this.loadedPlugins,function(t,r){r.destroy&&r.destroy(e)})}}}(navigator,window,document,jQuery)),k}(function(y,p){(function(w,o){y.exports=o(E,R,D,M())})(typeof self<"u"?self:O,function(w,o,x,C){return function(m){var e={};function t(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return m[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=m,t.c=e,t.d=function(r,n,a){t.o(r,n)||Object.defineProperty(r,n,{enumerable:!0,get:a})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,n){if(1&n&&(r=t(r)),8&n||4&n&&typeof r=="object"&&r&&r.__esModule)return r;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:r}),2&n&&typeof r!="string")for(var s in r)t.d(a,s,(function(i){return r[i]}).bind(null,s));return a},t.n=function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(n,"a",n),n},t.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},t.p="",t(t.s=4)}([function(m,e){m.exports=w},function(m,e){m.exports=o},function(m,e){m.exports=x},function(m,e){m.exports=C},function(m,e,t){t.r(e),t.d(e,"trumbowygPlugin",function(){return u}),t.d(e,"component",function(){return l});var r=t(0),n=t.n(r),a=t(1),s=(t(3),t(2)),i=["init","focus","blur","change","resize","paste","openfullscreen","closefullscreen","close","modalopen","modalclose"],l={name:"trumbowyg",render:()=>Object(a.h)("textarea",{ref:"root"}),props:{modelValue:{default:null,required:!0,validator:c=>c===null||typeof c=="string"||c instanceof String},config:{type:Object,default:()=>({})},svgPath:{type:[String,Boolean],default:t.n(s).a},disabled:{type:Boolean,default:!1}},data:()=>({el:null}),mounted(){this.el||(this.el=n()(this.$refs.root),this.el.trumbowyg(n.a.extend(!0,{},{svgPath:this.svgPath},this.config)),this.el.trumbowyg("html",this.modelValue),this.el.on("".concat("tbw","change"),this.onChange),this.el.on("".concat("tbw","blur"),this.onBlur),this.toggleDisabled(this.disabled),this.registerEvents())},watch:{modelValue(c){this.el&&c!==this.el.trumbowyg("html")&&this.el.trumbowyg("html",c)},disabled(c){this.toggleDisabled(c)}},methods:{onChange(c){this.$emit("update:modelValue",c.target.value)},onBlur(c){this.$emit("blur",c.target.value)},registerEvents(){i.forEach(c=>{this.el.on("".concat("tbw").concat(c),(...d)=>{this.$emit("".concat("tbw","-").concat(c),...d)})})},toggleDisabled(c){const d=c?"disable":"enable";this.el.trumbowyg(d)}},beforeUnmount(){this.el&&(this.el.trumbowyg("destroy"),this.el=null)}};const u=(c,d)=>{let h="trumbowyg";typeof d=="string"&&(h=d),c.component(h,l)};l.install=u,e.default=l}])})})(P);var I=P.exports;const j=B(I),H=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"}));export{H as v};
